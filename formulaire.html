<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="noindex">
  <title>Formulaire – PR Desjardins</title>
  <style>
    :root { --brand:#000; --accent:#0078d4; --accent-hover:#005a9e; }
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--brand);
      background: #fff url("assets/bg-honeycomb.png") center/340px repeat;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      display: flex; align-items: center; justify-content: center;
      padding: 24px;
    }
    .card {
      width: 100%;
      max-width: 720px;
      background: rgba(255,255,255,0.9);
      backdrop-filter: saturate(120%) blur(2px);
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.08);
    }
    /* Styles pour le formulaire, basés sur votre PDF */
    h1, h2 { border-bottom: 2px solid #ccc; padding-bottom: 4px; margin-top: 24px; }
    .form-section { margin-bottom: 24px; }
    .form-group { margin-bottom: 12px; }
    .form-group label { display: block; font-weight: 600; margin-bottom: 4px; }
    .form-group input, .form-group textarea {
      width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;
    }
    .form-group input[type="checkbox"] { width: auto; }
    .checkbox-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; }
    .btn{
      display:block; width:100%;
      padding:14px 18px; margin-top:24px;
      text-align:center; text-decoration:none; font-weight:600;
      color:#111; background:#F2F4F7;
      border:1px solid #E5E7EB;
      border-radius:8px;
      box-shadow:0 1px 2px rgba(0,0,0,.04);
      transition:background .15s ease, border-color .15s ease, transform .02s;
    }
    .btn:hover{ background:#E9EDF3; border-color:#D8DDE5; }
    .btn:active{ transform:translateY(1px); }
    .btn:focus-visible{ outline:2px solid #111; outline-offset:2px; }
  </style>
</head>
<body>
  <main class="card" id="form-to-print">
    <h1>Accueil des travailleurs</h1>
    <div class="form-section">
      <div class="form-group">
        <label>Nom du projet</label>
        <input type="text" name="projet-nom" value="">
      </div>
      <div class="form-group">
        <label># Projet</label>
        <input type="text" name="projet-num" value="">
      </div>
      <div class="form-group">
        <label>Métier CCQ</label>
        <input type="text" name="metier-ccq" value="">
      </div>
      <div class="form-group">
        <label>Échéance carte CCQ</label>
        <input type="date" name="echeance-ccq" value="">
      </div>
    </div>
   
    <h2>Informations du travailleur</h2>
    <div class="form-section">
      <div class="form-group">
        <label>Prénom et Nom</label>
        <input type="text" name="travailleur-nom" value="">
      </div>
      <div class="form-group">
        <label>Téléphone</label>
        <input type="tel" name="travailleur-tel" value="">
      </div>
          </div>

    <h2>FORMATIONS DU TRAVAILLEUR</h2>
    <div class="form-section checkbox-list">
      <label><input type="checkbox" name="formation-cadenassage"> Cadenassage</label>
      <label><input type="checkbox" name="formation-amiante"> Amiante/silice</label>
      <label><input type="checkbox" name="formation-espace-clos"> Espace clos</label>
      <label><input type="checkbox" name="formation-secourisme"> Secourisme en milieu de travail</label>
      <label><input type="checkbox" name="formation-nacelle"> Nacelle</label>
      <label><input type="checkbox" name="formation-respiratoire"> Protection respiratoire Fit Test 2ans</label>
      <label><input type="checkbox" name="formation-simdut"> SIMDUT 2015 obligatoire</label>
      <label><input type="checkbox" name="formation-plateforme"> Plateforme élévatrice</label>
    </div>

    <button id="generate-pdf" class="btn">Générer le PDF</button>
  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <script>
    document.getElementById('generate-pdf').addEventListener('click', function() {
      const formContent = document.getElementById('form-to-print');
     
      // Options pour la génération du PDF
      const options = {
        scale: 2, // Augmente la résolution pour une meilleure qualité
        useCORS: true,
        scrollY: 0,
      };

      html2canvas(formContent, options).then(canvas => {
        const imgData = canvas.toDataURL('image/png');
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF('p', 'mm', 'a4');
        
        const imgWidth = 210; // A4 width in mm
        const pageHeight = 295; // A4 height in mm
        const imgHeight = canvas.height * imgWidth / canvas.width;
        let heightLeft = imgHeight;
        let position = 0;

        doc.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
        heightLeft -= pageHeight;

        while (heightLeft >= 0) {
          position = heightLeft - imgHeight;
          doc.addPage();
          doc.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
          heightLeft -= pageHeight;
        }

        doc.save('Formulaire-Chantier.pdf');
      });
    });
  </script>
</body>
</html>
